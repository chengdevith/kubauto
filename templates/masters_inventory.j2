[all:vars]
ansible_user={{ agent_user }}
ansible_ssh_extra_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
ansible_python_interpreter=/usr/bin/python3

[kube_control_plane]
{% for instance in gcp_instances.results %}
{% if not instance.skipped is defined and instance.name is defined %}
{{ instance.name }} ansible_host={{ instance.networkInterfaces[0].accessConfigs[0].natIP }} ip={{ instance.networkInterfaces[0].networkIP }} access_ip={{ instance.networkInterfaces[0].networkIP }}
{% endif %}
{% endfor %}

[etcd:children]
kube_control_plane